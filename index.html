<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Ø¯Ø±Ø®ÙˆØ§Ø³Øª ÛŒØ¯Ú©â€ŒÚ©Ø´ | Ù…Ú©Ø§Ù†ÛŒÚ© Ø³ÛŒØ§Ø±</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

<style>
body{
  font-family: Tahoma, sans-serif;
  background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}

.card{
  width:100%;
  max-width:430px;
  background:#fff;
  border-radius:18px;
  padding:25px;
  box-shadow:0 15px 40px rgba(0,0,0,.25);
}

h2{
  text-align:center;
  margin-bottom:20px;
}

input,select,textarea,button{
  width:100%;
  margin-top:12px;
  padding:13px;
  border-radius:10px;
  border:1px solid #ddd;
  font-size:1em;
}

textarea{min-height:80px}

button{
  border:none;
  font-weight:bold;
  cursor:pointer;
}

.btn-map{
  background:#007bff;
  color:#fff;
}

.btn-send{
  background:#25D366;
  color:#fff;
  margin-top:15px;
  font-size:1.05em;
}

#map{
  display:none;
  height:260px;
  margin-top:12px;
  border-radius:12px;
  overflow:hidden;
}

.note{
  font-size:.85em;
  color:#555;
  margin-top:8px;
  text-align:center;
}
</style>
</head>

<body>

<div class="card">
  <h2>ğŸš˜ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø®Ø¯Ù…Ø§Øª</h2>

  <select id="service" required>
    <option value="">Ù†ÙˆØ¹ Ø®Ø¯Ù…Ø§Øª</option>
    <option value="ÛŒØ¯Ú©â€ŒÚ©Ø´">ÛŒØ¯Ú©â€ŒÚ©Ø´</option>
    <option value="Ù…Ú©Ø§Ù†ÛŒÚ© Ø³ÛŒØ§Ø±">Ù…Ú©Ø§Ù†ÛŒÚ© Ø³ÛŒØ§Ø±</option>
  </select>

  <input id="name" placeholder="Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ" required>
  <input id="phone" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³" required>
  <input id="plate" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ù¾Ù„Ø§Ú© Ø®ÙˆØ¯Ø±Ùˆ" required>
  <textarea id="desc" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)"></textarea>

  <input type="hidden" id="lat">
  <input type="hidden" id="lng">

  <button class="btn-map" onclick="openMap()">ğŸ“ Ø§Ù†ØªØ®Ø§Ø¨ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø±ÙˆÛŒ Ù†Ù‚Ø´Ù‡</button>
  <div id="map"></div>

  <button class="btn-send" onclick="sendWhatsApp()">ğŸ“² Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± ÙˆØ§ØªØ³Ø§Ù¾</button>

  <div class="note">
    Ù¾Ø³ Ø§Ø² Ø¨Ø§Ø² Ø´Ø¯Ù† ÙˆØ§ØªØ³Ø§Ù¾ ÙÙ‚Ø· Ø¯Ú©Ù…Ù‡ Ø§Ø±Ø³Ø§Ù„ Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯
  </div>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
let map, marker;

function openMap(){
  document.getElementById("map").style.display="block";

  if(!map){
    map = L.map('map').setView([35.7,51.4],13);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
      maxZoom:19
    }).addTo(map);

    map.on('click', e=>{
      const {lat,lng} = e.latlng;

      if(marker) map.removeLayer(marker);
      marker = L.marker([lat,lng]).addTo(map);

      document.getElementById("lat").value = lat;
      document.getElementById("lng").value = lng;
    });
  }
}

function sendWhatsApp(){
  const service = serviceEl.value;
  const name = nameEl.value;
  const phone = phoneEl.value;
  const plate = plateEl.value;
  const desc = descEl.value;
  const lat = latEl.value;
  const lng = lngEl.value;

  if(!service || !name || !phone || !plate){
    alert("Ù„Ø·ÙØ§Ù‹ Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯");
    return;
  }

  if(!lat || !lng){
    alert("Ù„Ø·ÙØ§Ù‹ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø®ÙˆØ¯ Ø±Ø§ Ø±ÙˆÛŒ Ù†Ù‚Ø´Ù‡ Ù…Ø´Ø®Øµ Ú©Ù†ÛŒØ¯");
    return;
  }

  const mapLink = `https://maps.google.com/?q=${lat},${lng}`;

  const text = `
ğŸš¨ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¬Ø¯ÛŒØ¯ Ø®Ø¯Ù…Ø§Øª Ø®ÙˆØ¯Ø±Ùˆ

ğŸ”§ Ø³Ø±ÙˆÛŒØ³: ${service}
ğŸ‘¤ Ù†Ø§Ù…: ${name}
ğŸ“ ØªÙ…Ø§Ø³: ${phone}
ğŸš˜ Ù¾Ù„Ø§Ú©: ${plate}
ğŸ“ ØªÙˆØ¶ÛŒØ­Ø§Øª: ${desc || "â€”"}

ğŸ“ Ù…ÙˆÙ‚Ø¹ÛŒØª:
${mapLink}
`;

  const whatsappNumber = "989944546917"; // â† Ø´Ù…Ø§Ø±Ù‡ Ø®ÙˆØ¯Øª
  const url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(text)}`;

  window.open(url,"_blank");
}

const serviceEl = document.getElementById("service");
const nameEl = document.getElementById("name");
const phoneEl = document.getElementById("phone");
const plateEl = document.getElementById("plate");
const descEl = document.getElementById("desc");
const latEl = document.getElementById("lat");
const lngEl = document.getElementById("lng");
</script>

</body>
</html>
